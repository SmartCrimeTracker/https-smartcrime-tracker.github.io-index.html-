<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Smart Crime Tracker (Demo)</title>
  <style>
    :root {
      --bg: #0b0f19;
      --panel: #161b2a;
      --accent: #3d8bfd;
      --text: #eaeaea;
      --muted: #888;
    }
    body {
      margin:0; font-family: Arial, sans-serif;
      background: var(--bg); color: var(--text);
    }
    header {
      padding:10px; display:flex; align-items:center;
      background:#101526; justify-content:space-between;
    }
    .logoBox {
      width:120px;height:60px;display:flex;align-items:center;justify-content:center;
    }
    nav a {
      color: var(--text); margin:0 10px; text-decoration:none; font-size:14px;
    }
    .tabs { display:flex; margin:10px; }
    .tab {
      padding:8px 12px; cursor:pointer;
      background:#1c2235; margin-right:5px; border-radius:6px;
    }
    .tab.active { background: var(--accent); color:#fff; }
    .tab-content { display:none; padding:10px; }
    .tab-content.active { display:block; }
    .panel {
      background: var(--panel); padding:12px; border-radius:8px; margin:8px 0;
    }
    .btn, .ghost {
      padding:6px 12px; border:none; border-radius:6px;
      cursor:pointer; font-size:14px;
    }
    .btn { background: var(--accent); color:#fff; }
    .ghost { background: transparent; border:1px solid var(--muted); color:var(--muted);}
    input[type="file"], input[type="text"], input[type="password"] {
      padding:6px; border-radius:6px; border:1px solid #333; background:#0f1320; color:#fff;
    }
    .tiny { font-size:12px; color:var(--muted); }
    .note { font-size:12px; color:#aaa; }
    #toast {
      position:fixed; bottom:20px; right:20px; background:#222; color:#fff;
      padding:8px 14px; border-radius:6px; display:none;
    }
  </style>
</head>
<body>
  <header>
    <div class="logoBox">
      <!-- default logo -->
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="60" height="60">
        <circle cx="50" cy="50" r="48" fill="#3d8bfd"/>
        <text x="50" y="55" text-anchor="middle" font-size="28" fill="#fff" font-family="Arial">SCT</text>
      </svg>
    </div>
    <nav>
      <a href="#">Home</a>
      <a href="#">Docs</a>
      <a href="#">Support</a>
    </nav>
  </header>

  <main>
    <!-- Tabs -->
    <div class="tabs">
      <div class="tab active" data-tab="home">Home</div>
      <div class="tab" data-tab="login">Login</div>
      <div class="tab" data-tab="admin">Admin</div>
    </div>

    <!-- Tab Contents -->
    <section id="tab-home" class="tab-content active">
      <div class="panel">
        <h3>Smart Crime Tracker</h3>
        <p>Demo interface for tracking system. Features are placeholder only.</p>
      </div>
    </section>

    <section id="tab-login" class="tab-content">
      <div class="panel">
        <h3>Login</h3>
        <input id="username" type="text" placeholder="Username"/><br/><br/>
        <input id="password" type="password" placeholder="Password"/><br/><br/>
        <button class="btn" id="loginBtn">Login</button>
        <div id="loginStatus" class="tiny" style="margin-top:6px"></div>
      </div>
    </section>

    <section id="tab-admin" class="tab-content">
      <div class="panel">
        <h3>Admin Panel</h3>
        <div id="userInfo" class="tiny"></div>
      </div>

      <!-- Logo Management -->
      <div class="panel" style="margin-top:12px">
        <h4 style="margin:0 0 8px;color:var(--accent)">Logo â€” Admin (Upload / Save)</h4>
        <div style="display:flex;gap:8px;flex-direction:column">
          <label class="tiny">Upload logo (SVG or PNG/JPG)</label>
          <input id="logoFile" type="file" accept="image/*,image/svg+xml">
          
          <div style="display:flex;gap:8px;align-items:center;margin-top:8px">
            <button class="btn" id="saveLogoBtn">Save Logo</button>
            <button class="ghost" id="downloadLogoBtn">Download Logo</button>
            <button class="ghost" id="resetLogoBtn">Reset Default</button>
          </div>
  
          <div style="margin-top:10px">
            <div class="tiny">Preview:</div>
            <div id="logoPreview" style="width:120px;height:80px;border-radius:8px;background:rgba(255,255,255,0.02);display:grid;place-items:center;padding:6px;margin-top:6px">
              <!-- preview will be injected here -->
            </div>
            <div class="note" style="margin-top:8px">Logo is saved only in this browser (localStorage). For all users, upload to server.</div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <div id="toast"></div>

  <script>
    // ===== Tabs =====
    document.querySelectorAll('.tab').forEach(tab=>{
      tab.onclick = ()=>{
        document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById('tab-'+tab.dataset.tab).classList.add('active');
      };
    });

    // ===== Toast =====
    function toast(msg){
      const t=document.getElementById('toast');
      t.textContent=msg; t.style.display='block';
      setTimeout(()=>t.style.display='none',2000);
    }

    // ===== Demo Login =====
    let currentUser=null;
    document.getElementById('loginBtn').onclick=()=>{
      const u=document.getElementById('username').value;
      const p=document.getElementById('password').value;
      if(u==='admin' && p==='Allah@1'){
        currentUser='admin';
        document.getElementById('loginStatus').textContent='Logged in as admin';
        document.getElementById('userInfo').textContent='Signed in: admin';
        toast('Welcome admin');
      }else{
        currentUser=null;
        document.getElementById('loginStatus').textContent='Login failed';
        toast('Invalid login');
      }
    };

    // ===== Logo Upload / Save / Download / Reset =====
    const LOGO_KEY = 'sct_logo_v1';
    function isAdmin(){
      return currentUser==='admin';
    }
    function loadSavedLogo(){
      const raw=localStorage.getItem(LOGO_KEY);
      const logoBox=document.querySelector('.logoBox');
      const preview=document.getElementById('logoPreview');
      if(!logoBox || !preview) return;
      if(!raw){
        preview.innerHTML='<div class="tiny" style="opacity:.75">Default</div>';
        return;
      }
      if(raw.startsWith('<svg')||raw.includes('<svg')){
        logoBox.innerHTML=raw; preview.innerHTML=raw;
      } else if(raw.startsWith('data:')){
        logoBox.innerHTML=`<img src="${raw}" style="max-width:100%;max-height:100%;border-radius:8px">`;
        preview.innerHTML=`<img src="${raw}" style="max-width:100%;max-height:100%;border-radius:6px">`;
      }
    }
    document.getElementById('logoFile').addEventListener('change',(ev)=>{
      const f=ev.target.files[0]; if(!f) return;
      const r=new FileReader();
      r.onload=(e)=>{
        const result=e.target.result;
        const preview=document.getElementById('logoPreview');
        if(f.type==='image/svg+xml'||(typeof result==='string'&&result.trim().startsWith('<svg'))){
          preview.innerHTML=result; preview.dataset.pending=result;
          toast('SVG ready to save');
        } else {
          preview.innerHTML=`<img src="${result}" style="max-width:100%;max-height:100%;border-radius:6px">`;
          preview.dataset.pending=result;
          toast('Image ready to save');
        }
      };
      if(f.type==='image/svg+xml') r.readAsText(f);
      else r.readAsDataURL(f);
    });
    document.getElementById('saveLogoBtn').onclick=()=>{
      if(!isAdmin()){ toast('Only admin can save'); return;}
      const preview=document.getElementById('logoPreview');
      if(!preview.dataset.pending){ toast('No logo to save'); return;}
      localStorage.setItem(LOGO_KEY, preview.dataset.pending);
      loadSavedLogo(); delete preview.dataset.pending;
      toast('Logo saved');
    };
    document.getElementById('downloadLogoBtn').onclick=()=>{
      const raw=localStorage.getItem(LOGO_KEY); if(!raw){toast('No logo saved');return;}
      if(raw.startsWith('<svg')){
        const blob=new Blob([raw],{type:'image/svg+xml'});
        const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='logo.svg';a.click();
      } else if(raw.startsWith('data:')){
        fetch(raw).then(r=>r.blob()).then(blob=>{
          const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='logo.png';a.click();
        });
      }
    };
    document.getElementById('resetLogoBtn').onclick=()=>{
      if(!isAdmin()){ toast('Only admin can reset'); return;}
      localStorage.removeItem(LOGO_KEY); loadSavedLogo(); toast('Reset done');
    };
    document.addEventListener('DOMContentLoaded',loadSavedLogo);
  </script>
</body>
</html>
