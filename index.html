<!doctype html>
<html lang="bn">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Smart Crime Tracker — Demo (Safe Mock)</title>
<style>
  /* minimal modern styling for presentation demo */
  :root{--bg:#021618;--card:#0b2530;--accent:#00e486;--muted:#9fdad0;color:#e9fff6}
  *{box-sizing:border-box} body{margin:0;font-family:Inter, Roboto, Arial;background:linear-gradient(180deg,#021618,#00372e);color:var(--color,#e9fff6)}
  .wrap{max-width:1100px;margin:20px auto;padding:18px}
  header{display:flex;align-items:center;gap:12px}
  .logo{width:68px;height:68px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#16c7ff);display:grid;place-items:center;font-weight:700;color:#012}
  h1{margin:0;font-size:20px}
  .top{display:flex;gap:12px;align-items:center;margin:14px 0}
  .grid{display:grid;grid-template-columns:1fr 360px;gap:16px}
  .panel{background:var(--card);padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03)}
  input,select,textarea{width:100%;padding:9px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:rgba(255,255,255,0.02);color:inherit}
  button{padding:9px 12px;border-radius:8px;border:none;background:linear-gradient(180deg,var(--accent),#00b36a);color:#012;cursor:pointer;font-weight:700}
  .ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:#9fdad0}
  table{width:100%;border-collapse:collapse}
  th,td{padding:8px;border-bottom:1px solid rgba(255,255,255,0.03);font-size:13px}
  .small{font-size:13px;color:#9fdad0}
  .note{font-size:13px;color:#9fdad0;margin-top:8px}
  .toast{position:fixed;right:18px;bottom:18px;background:#022;padding:10px 14px;border-radius:10px;color:#dff;opacity:0;transition:all .25s}
  pre.server{background:#011; padding:12px;border-radius:8px;overflow:auto;color:#bfe}
  .masked{letter-spacing:2px}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="logo">SCT</div>
    <div>
      <h1>Smart Crime Tracker — Safe Presentation Demo</h1>
      <div class="small">UI-only demo — no live telecom hooks. See server snippet comments for integration guidance.</div>
    </div>
  </header>

  <div class="top">
    <div class="small">Logged in as: <b>demo_admin</b></div>
    <div style="margin-left:auto" class="small">SIM (masked by default): <span id="maskSIM" class="masked">+8801******38</span></div>
  </div>

  <div class="grid">
    <!-- main -->
    <div>
      <!-- Dashboard Panel -->
      <div class="panel" style="margin-bottom:12px">
        <h3>Dashboard (Demo)</h3>
        <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px">
          <div style="background:rgba(255,255,255,0.02);padding:10px;border-radius:8px;min-width:140px">
            <div class="small">Active Cases</div><div style="font-weight:800;font-size:20px">12</div>
          </div>
          <div style="background:rgba(255,255,255,0.02);padding:10px;border-radius:8px;min-width:140px">
            <div class="small">High Risk</div><div style="font-weight:800;font-size:20px">3</div>
          </div>
          <div style="background:rgba(255,255,255,0.02);padding:10px;border-radius:8px;min-width:140px">
            <div class="small">Alerts Today</div><div style="font-weight:800;font-size:20px">7</div>
          </div>
        </div>
      </div>

      <!-- Number Search & SIM Query -->
      <div class="panel" style="margin-bottom:12px">
        <h3>Number / SIM Query (Demo)</h3>
        <div style="display:flex;gap:8px">
          <!-- pre-fill masked sim; allow user to unmask locally -->
          <input id="simInput" type="text" placeholder="+8801XXXXXXXXX" value="+8801*******38"/>
          <button id="unmaskBtn" class="ghost">Unmask (local)</button>
        </div>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button id="queryBtn">Query SIM (Mock)</button>
          <button id="liveWarn" class="ghost">⚠️ Live calls disabled</button>
        </div>
        <div id="simResult" style="margin-top:12px"></div>

        <div class="note">উল্লেখ্য: এই বাটনটি কেবল <b>সিমুলেটেড</b> ফলাফল দেখায়। প্রকৃত BTRC/BTCL API-কে কল করার জন্য সার্ভার-বেজড নিরাপদ প্রক্রিয়া প্রয়োজন।</div>
      </div>

      <!-- AI / FB demo -->
      <div class="panel" style="margin-bottom:12px">
        <h3>AI Analyzer (Demo)</h3>
        <textarea id="aiInput" placeholder="Example: cash drop at port, meet handler at gate 3"></textarea>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button onclick="runAIDemo()">Analyze</button>
          <button onclick="clearAIDemo()" class="ghost">Clear</button>
        </div>
        <div id="aiOut" style="margin-top:10px"></div>
      </div>

      <!-- CDR demo -->
      <div class="panel">
        <h3>CDR (Mock)</h3>
        <div style="display:flex;gap:8px;margin-bottom:8px">
          <button onclick="loadCDR()">Load Sample CDR</button>
          <button onclick="exportCDR()" class="ghost">Export CSV</button>
        </div>
        <div style="overflow:auto"><table id="cdrTbl"><thead><tr><th>Time</th><th>Caller</th><th>Callee</th><th>Dur(s)</th><th>Cell</th></tr></thead><tbody></tbody></table></div>
      </div>
    </div>

    <!-- right column -->
    <aside>
      <div class="panel" style="margin-bottom:12px">
        <h3>Map (Embed)</h3>
        <div style="height:260px;border-radius:8px;overflow:hidden">
          <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d14604.69688454172!2d90.40744!3d23.7104!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1" style="width:100%;height:100%;border:0" loading="lazy"></iframe>
        </div>
      </div>

      <div class="panel" style="margin-bottom:12px">
        <h3>Suspicious Handlers (Demo)</h3>
        <table><thead><tr><th>Handler</th><th>Score</th></tr></thead><tbody id="handlerTbl"><tr><td>HND-0173****210</td><td>78</td></tr><tr><td>HND-0182****905</td><td>64</td></tr></tbody></table>
        <div style="margin-top:8px"><button onclick="analyzeHandlers()">Re-analyze</button></div>
      </div>

      <div class="panel">
        <h3>Logo Manager (Local)</h3>
        <input id="logoFile" type="file" accept="image/*,image/svg+xml"/>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button id="saveLogo">Save (local)</button>
          <button id="resetLogo" class="ghost">Reset</button>
        </div>
        <div id="logoPreview" style="margin-top:10px;min-height:56px;display:grid;place-items:center;background:rgba(255,255,255,0.02);border-radius:6px"></div>
      </div>

      <div class="panel" style="margin-top:12px">
        <h3>Server Integration (Notes)</h3>
        <div class="small">এই ডেমোটি UI-only। প্রকৃত SIM API কল করার জন্য নিচের সার্ভার-কোড ব্যবহার করুন (কেবল অফিসিয়াল অনুমোদন থাকলে)।</div>
        <pre class="server" id="serverSnippet">
// NODE (server.js) — DO NOT RUN AGAINST LIVE API WITHOUT AUTH
// Set environment variables: API_ENDPOINT, API_KEY, AUTH_TOKENS
/*
const express = require('express');
const fetch = require('node-fetch');
const app = express();
app.use(express.json());
app.post('/api/sim-info', async (req,res)=>{
  const sim = req.body.sim;
  // validate sim format
  // call telecom API with server-side API_KEY (never expose in browser)
  // return only sanitized fields to frontend
});
*/
        </pre>
      </div>
    </aside>
  </div>

  <div class="note" style="margin-top:12px">
    ⚠️ সতর্কবার্তা: প্রকৃত টেলিকম ডেটা অ্যাক্সেস করতে হলে <b>সরকারি অনুমোদন</b> থাকা আবশ্যক। এই পেজটি অনাধিকারপ্রবেশ/ট্র্যাকিং-এ সহায়তা করে না — শুধুই প্রেজেন্টেশন-ডেমো।
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
  /* small helpers */
  const $ = s=>document.querySelector(s), $$=s=>document.querySelectorAll(s);
  const toast = txt=>{ const t = $('#toast'); t.textContent=txt; t.style.opacity=1; setTimeout(()=>t.style.opacity=0,1800); };

  // Masked SIM display — do NOT store or echo full number publicly
  const maskedDisplay = '+8801*******38'; // masked for presentation
  $('#simInput').value = maskedDisplay;
  $('#maskSIM').textContent = maskedDisplay;

  // Query SIM (MOCK) — does NOT call any real telecom API
  $('#queryBtn').addEventListener('click', ()=>{
    const sim = $('#simInput').value.trim();
    // In demo mode we won't use the real number even if provided.
    // Simulate plausible response.
    const mock = {
      sim: sim,
      operator: 'DemoTel',
      status: 'ACTIVE',
      lastSeen: 'Motijheel, Dhaka',
      riskScore: 72,
      tags: ['handler-link','frequent-roaming']
    };
    // render
    $('#simResult').innerHTML = `<div style="padding:10px;background:rgba(0,0,0,0.12);border-radius:8px">
      <b>SIM:</b> ${mock.sim} <br/>
      <b>Operator:</b> ${mock.operator} <br/>
      <b>Status:</b> ${mock.status} <br/>
      <b>LastSeen:</b> ${mock.lastSeen} <br/>
      <b>Risk Score:</b> <span style="color:${mock.riskScore>70?'#ff6b6b':'#ffd166'}">${mock.riskScore}%</span>
      <div style="margin-top:8px"><b>Tags:</b> ${mock.tags.join(', ')}</div>
    </div>`;
    toast('Mock SIM query returned');
  });

  // AI demo
  $('#aiInput')?.addEventListener('keydown', (e)=>{ if(e.key==='Enter' && e.ctrlKey){ runAIDemo(); }});
  function runAIDemo(){
    const txt = $('#aiInput').value || '';
    if(!txt){ toast('Provide text'); return; }
    const bad = ['cash','drop','handler','gold','port','meet','hawala'];
    let score = 10 + Math.min(80, txt.length);
    const marked = txt.split(/\b/).map(tok=> bad.includes(tok.toLowerCase())? `<mark style="background:rgba(255,215,0,0.2);padding:2px">${tok}</mark>`:tok ).join('');
    $('#aiOut').innerHTML = `<div style="background:rgba(0,0,0,0.12);padding:10px;border-radius:6px"><b>Risk:</b> ${score}%<div style="margin-top:8px">${marked}</div></div>`;
    toast('AI (demo) complete');
  }
  function clearAIDemo(){ $('#aiInput').value=''; $('#aiOut').innerHTML=''; }

  // CDR demo
  const SAMPLE = [
    {t:'2025-09-01 09:12', caller:'01700000001', callee:'01800000002', dur:120, cell:'Dhaka'},
    {t:'2025-09-01 11:05', caller:'01800000002', callee:'01700000003', dur:45, cell:'Chattogram'}
  ];
  function loadCDR(){ const tb = $('#cdrTbl tbody'); tb.innerHTML=''; SAMPLE.forEach(r=>{ const tr = document.createElement('tr'); tr.innerHTML=`<td>${r.t}</td><td>${r.caller}</td><td>${r.callee}</td><td>${r.dur}</td><td>${r.cell}</td>`; tb.appendChild(tr); }); toast('Sample CDR loaded'); }
  function exportCDR(){ const csv = ['Time,Caller,Callee,Duration,Cell', ...SAMPLE.map(r=>`${r.t},${r.caller},${r.callee},${r.dur},${r.cell}`)].join('\n'); const b=new Blob([csv],{type:'text/csv'}); const a=document.createElement('a'); a.href=URL.createObjectURL(b); a.download='cdr_demo.csv'; a.click(); toast('Exported'); }

  // handlers
  function analyzeHandlers(){ const tbl = $('#handlerTbl'); tbl.innerHTML=''; ['HND-0173****210','HND-0182****905','HND-0167****441'].forEach(n=>{ const sc = 40+Math.floor(Math.random()*50); const tr = document.createElement('tr'); tr.innerHTML=`<td>${n}</td><td>${sc}</td>`; tbl.appendChild(tr); }); toast('Handlers analyzed'); }

  // Logo manager (localStorage)
  function loadLogoPreview(){ const raw = localStorage.getItem('sct_logo_demo'); if(!raw){ $('#logoPreview').innerHTML = '<div class="small">Default</div>'; return; } $('#logoPreview').innerHTML = `<img src="${raw}" style="max-width:100%;max-height:56px;border-radius:6px"/>`; }
  $('#saveLogo').addEventListener('click', ()=>{
    const f = $('#logoFile').files[0]; if(!f){ toast('Select file'); return; }
    const r = new FileReader(); r.onload = e=>{ localStorage.setItem('sct_logo_demo', e.target.result); loadLogoPreview(); toast('Logo saved locally'); }; r.readAsDataURL(f);
  });
  $('#resetLogo').addEventListener('click', ()=>{ localStorage.removeItem('sct_logo_demo'); loadLogoPreview(); toast('Logo reset'); });
  loadLogoPreview();

  // helper bindings
  function clearAIDemo(){ $('#aiInput').value=''; $('#aiOut').innerHTML=''; }
  function analyzeHandlers(){ const tbl = $('#handlerTbl'); tbl.innerHTML=''; ['HND-0173****210','HND-0182****905','HND-0167****441'].forEach(n=>{ const sc = 40+Math.floor(Math.random()*50); const tr = document.createElement('tr'); tr.innerHTML=`<td>${n}</td><td>${sc}</td>`; tbl.appendChild(tr); }); }
  // initial load
  analyzeHandlers();

  // Unmask (local only) — does NOT send number anywhere
  $('#unmaskBtn').addEventListener('click', ()=>{
    // WARNING: unmasking is local only for demo. Do not paste others' private numbers here.
    const real = prompt('Enter the full SIM number (local only). For demo we will not transmit it:','+8801XXXXXXXXX');
    if(real) { $('#simInput').value = real; $('#maskSIM').textContent = '[LOCAL UNMASKED]'; toast('Unmasked locally (not transmitted)'); }
  });

  // keyboard enter to query
  document.addEventListener('keydown', e=>{ if(e.key==='Enter' && document.activeElement === $('#simInput')) $('#queryBtn').click(); });

  // runAIDemo helper (exposed)
  window.runAIDemo = runAIDemo;
  window.clearAIDemo = clearAIDemo;
  window.loadCDR = loadCDR;
  window.exportCDR = exportCDR;
  window.analyzeHandlers = analyzeHandlers;
</script>
</body>
</html>
